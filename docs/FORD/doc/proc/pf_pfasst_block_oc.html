<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
   
   <meta name="description" content="The library for running PFASST">
    
    <meta name="author" content="Matthew Emmett. Michael Minion, Sebastian Goetschel, Brandon Krull, Francois Hamon" >
    <link rel="icon" href="../favicon.png">

    <title>pf_pfasst_block_oc &ndash; libpfasst</title>

    <link href="../css/bootstrap.min.css" rel="stylesheet">
    <link href="../css/pygments.css" rel="stylesheet">
    <link href="../css/font-awesome.min.css" rel="stylesheet">
    <link href="../css/local.css" rel="stylesheet">
    
    <link  href="../tipuesearch/tipuesearch.css" rel="stylesheet">
    
    

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    
    <script src="../js/jquery-2.1.3.min.js"></script>
    <script src="../js/svg-pan-zoom.min.js"></script>

  </head>

  <body>

    <!-- Fixed navbar -->
    <nav class="navbar navbar-inverse navbar-fixed-top">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="../index.html">libpfasst </a>
        </div>
        <div id="navbar" class="navbar-collapse collapse">
          <ul class="nav navbar-nav">
        
            <li class="dropdown hidden-xs visible-sm visible-md hidden-lg">
              <a href="#" class="dropdown-toggle"
              data-toggle="dropdown" role="button"
              aria-haspopup="true"
     aria-expanded="false">Contents <span class="caret"></span></a>
        <ul class="dropdown-menu">
          
              
            <li><a href="../lists/files.html">Source Files</a></li>
        
        
        
            <li><a href="../lists/modules.html">Modules</a></li>
        
            
                                
            <li><a href="../lists/procedures.html">Procedures</a></li>
        
               
            <li><a href="../lists/types.html">Derived Types</a></li>
        
        
            </ul>
            </li>


<li class="visible-xs hidden-sm visible-lg"><a href="../lists/files.html">Source Files</a></li>



<li class="visible-xs hidden-sm visible-lg"><a href="../lists/modules.html">Modules</a></li>



<li class="visible-xs hidden-sm visible-lg"><a href="../lists/procedures.html">Procedures</a></li>

                             
<li class="visible-xs hidden-sm visible-lg"><a href="../lists/types.html">Derived Types</a></li>


          </ul>
        
        <form action="../search.html" class="navbar-form navbar-right" role="search">
        <div class="form-group">
          <input type="text" class="form-control" placeholder="Search" name="q" id="tipue_search_input" autocomplete="off" required>
        </div>
<!--
        <button type="submit" class="btn btn-default">Submit</button>
-->
        </form>
        
        </div><!--/.nav-collapse -->
      </div>
    </nav>

    <div class="container">
    
  
  <div class="row">
    <h1>pf_pfasst_block_oc
      <small>Subroutine</small>
    
    </h1>
    
<div class="row">
  <div class="col-lg-12">
<div class="well well-sm">
  <ul class="list-inline" style="margin-bottom:0px;display:inline">
     
     
     
     
    
    
     <li><i class="fa fa-list-ol"></i>
       <a data-toggle="tooltip"
    data-placement="bottom" data-html="true"
    title=" 0.4% of total for procedures.">61 statements</a>
     </li> 
     
     
     
    <li><i class="fa fa-code"></i><a href="../src/pf_parallel_oc.f90"> Source File</a></li>
     
     
  </ul>
  <ol class="breadcrumb in-well text-right">
  
    
     <li><a href='../sourcefile/pf_parallel_oc.f90.html'>pf_parallel_oc.f90</a></li>
    
     <li><a href='../module/pf_mod_parallel_oc.html'>pf_mod_parallel_oc</a></li>
    
  
     <li class="active">pf_pfasst_block_oc</li>
  </ol>
</div>
</div>
</div>
<script>
  $(function () {
  $('[data-toggle="tooltip"]').tooltip()
  })
</script>

  </div>
  
  <div class="row">
    <div class="col-md-3 hidden-xs hidden-sm visible-md visible-lg">
    
<div id="sidebar">
  
<h3>Contents</h3>
 





















<div class="panel panel-primary">
  <div class="panel-heading text-left"><h3 class="panel-title">Source Code</h3></div>
  <div class="list-group">
    <a class="list-group-item" href="../proc/pf_pfasst_block_oc.html#src">pf_pfasst_block_oc</a>
  </div>
</div>



</div>

    </div>
    
    <div class="col-md-9" id='text'>
    <h2>
public subroutine pf_pfasst_block_oc(pf, dt, nsteps, predict, flags, step)
    
    
   
</h2>
    
  


    
    <p>Routine to do the pfasst iterations for optimal control problems on one block of processors until completion.
  Each processor will do either a fixed number of iterations, or iterate until a tolerance is met
  On calling, it is assumed that the levels are already loaded with the initial guesses</p>
    

    <h3>Arguments</h3>
    
      
<table class="table table-striped varlist">
<thead><tr><th>Type</th>
<th>Intent</th><th>Optional</th>
<th>Attributes</th><th></th><th>Name</th><th></th></thead>



<tbody>

  
  
  
  
<tr>
  
  <td><span class="anchor" id="variable-pf%7E4"></span>type(<a href='../type/pf_pfasst_t.html'>pf_pfasst_t</a>),</td>
  <td>intent(inout),</td>
  <td></td>
  
  <td>target</td><td>::</td>
  <td><strong>pf</strong></td><td></td>
  
</tr>

  
  
  
  
<tr>
  
  <td><span class="anchor" id="variable-dt%7E5"></span>real(kind=pfdp),</td>
  <td>intent(in)</td>
  <td></td>
  
  <td></td><td>::</td>
  <td><strong>dt</strong></td><td></td>
  
</tr>

  
  
  
  
<tr>
  
  <td><span class="anchor" id="variable-nsteps%7E3"></span>integer,</td>
  <td>intent(in)</td>
  <td></td>
  
  <td></td><td>::</td>
  <td><strong>nsteps</strong></td><td></td>
  
</tr>

  
  
  
  
<tr>
  
  <td><span class="anchor" id="variable-predict"></span>logical,</td>
  <td>intent(in)</td>
  <td></td>
  
  <td></td><td>::</td>
  <td><strong>predict</strong></td><td></td>
  
</tr>

  
  
  
  
<tr>
  
  <td><span class="anchor" id="variable-flags%7E3"></span>integer,</td>
  <td>intent(in),</td>
  <td>optional</td>
  
  <td></td><td>::</td>
  <td><strong>flags</strong></td><td></td>
  
</tr>

  
  
  
  
<tr>
  
  <td><span class="anchor" id="variable-step%7E2"></span>integer,</td>
  <td>intent(in),</td>
  <td>optional</td>
  
  <td></td><td>::</td>
  <td><strong>step</strong></td><td></td>
  
</tr>

</tbody>
</table>

    
    
    
    <br>
    
    
    <div class="panel panel-default">
      <div class="panel-heading">
  <h3 class="panel-title">Calls</h3>
      </div>
      <div class="panel-body">
  <div class="depgraph"><?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.38.0 (20140413.2041)
 -->
<!-- Title: proc~~pf_pfasst_block_oc~~CallsGraph Pages: 1 -->
<svg id="procpf_pfasst_block_ocCallsGraph" width="641pt" height="602pt"
 viewBox="0.00 0.00 641.00 601.76" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="proc~~pf_pfasst_block_oc~~CallsGraph" class="graph" transform="scale(0.962462 0.962462) rotate(0) translate(4 621.225)">
<title>proc~~pf_pfasst_block_oc~~CallsGraph</title>
<polygon fill="white" stroke="none" points="-4,4 -4,-621.225 662,-621.225 662,4 -4,4"/>
<!-- proc~pf_pfasst_block_oc -->
<g id="proc~~pf_pfasst_block_oc~~CallsGraph_node1" class="node"><title>proc~pf_pfasst_block_oc</title>
<polygon fill="none" stroke="black" points="104,-263 0,-263 0,-239 104,-239 104,-263"/>
<text text-anchor="middle" x="52" y="-248.6" font-family="Helvetica,sans-Serif" font-size="10.50">pf_pfasst_block_oc</text>
</g>
<!-- proc~end_timer -->
<g id="proc~~pf_pfasst_block_oc~~CallsGraph_node2" class="node"><title>proc~end_timer</title>
<g id="a_proc~~pf_pfasst_block_oc~~CallsGraph_node2"><a xlink:href=".././proc/end_timer.html" xlink:title="end_timer">
<polygon fill="#d9534f" stroke="#d9534f" points="650,-420 589,-420 589,-396 650,-396 650,-420"/>
<text text-anchor="middle" x="619.5" y="-405.6" font-family="Helvetica,sans-Serif" font-size="10.50" fill="white">end_timer</text>
</a>
</g>
</g>
<!-- proc~pf_pfasst_block_oc&#45;&gt;proc~end_timer -->
<g id="proc~~pf_pfasst_block_oc~~CallsGraph_edge1" class="edge"><title>proc~pf_pfasst_block_oc&#45;&gt;proc~end_timer</title>
<path fill="none" stroke="#000000" d="M56.9763,-263.309C67.247,-293.875 96.9055,-374.819 140,-431 202.906,-513.008 219.131,-546.96 316,-583 411.393,-618.491 460.666,-637.985 545,-581 595.942,-546.578 611.712,-469.122 616.488,-430.617"/>
<polygon fill="#000000" stroke="#000000" points="619.994,-430.753 617.604,-420.431 613.036,-429.99 619.994,-430.753"/>
</g>
<!-- proc~pf_check_convergence_oc -->
<g id="proc~~pf_pfasst_block_oc~~CallsGraph_node3" class="node"><title>proc~pf_check_convergence_oc</title>
<g id="a_proc~~pf_pfasst_block_oc~~CallsGraph_node3"><a xlink:href=".././proc/pf_check_convergence_oc.html" xlink:title="pf_check_convergence_oc">
<polygon fill="#d9534f" stroke="#d9534f" points="280,-66 140,-66 140,-42 280,-42 280,-66"/>
<text text-anchor="middle" x="210" y="-51.6" font-family="Helvetica,sans-Serif" font-size="10.50" fill="white">pf_check_convergence_oc</text>
</a>
</g>
</g>
<!-- proc~pf_pfasst_block_oc&#45;&gt;proc~pf_check_convergence_oc -->
<g id="proc~~pf_pfasst_block_oc~~CallsGraph_edge2" class="edge"><title>proc~pf_pfasst_block_oc&#45;&gt;proc~pf_check_convergence_oc</title>
<path fill="none" stroke="#000000" d="M55.9259,-238.767C63.9422,-207.802 89.1288,-125.549 140,-80 144.053,-76.3708 148.662,-73.23 153.531,-70.5155"/>
<polygon fill="#000000" stroke="#000000" points="155.098,-73.6454 162.511,-66.0763 151.996,-67.3702 155.098,-73.6454"/>
</g>
<!-- proc~pf_v_cycle_oc -->
<g id="proc~~pf_pfasst_block_oc~~CallsGraph_node4" class="node"><title>proc~pf_v_cycle_oc</title>
<g id="a_proc~~pf_pfasst_block_oc~~CallsGraph_node4"><a xlink:href=".././proc/pf_v_cycle_oc.html" xlink:title="pf_v_cycle_oc">
<polygon fill="#d9534f" stroke="#d9534f" points="250,-344 170,-344 170,-320 250,-320 250,-344"/>
<text text-anchor="middle" x="210" y="-329.6" font-family="Helvetica,sans-Serif" font-size="10.50" fill="white">pf_v_cycle_oc</text>
</a>
</g>
</g>
<!-- proc~pf_pfasst_block_oc&#45;&gt;proc~pf_v_cycle_oc -->
<g id="proc~~pf_pfasst_block_oc~~CallsGraph_edge3" class="edge"><title>proc~pf_pfasst_block_oc&#45;&gt;proc~pf_v_cycle_oc</title>
<path fill="none" stroke="#000000" d="M76.3548,-263.127C102.969,-276.945 146.639,-299.62 176.552,-315.152"/>
<polygon fill="#000000" stroke="#000000" points="175.253,-318.421 185.741,-319.923 178.479,-312.209 175.253,-318.421"/>
</g>
<!-- proc~call_hooks -->
<g id="proc~~pf_pfasst_block_oc~~CallsGraph_node5" class="node"><title>proc~call_hooks</title>
<g id="a_proc~~pf_pfasst_block_oc~~CallsGraph_node5"><a xlink:href=".././proc/call_hooks.html" xlink:title="call_hooks">
<polygon fill="#d9534f" stroke="#d9534f" points="543,-227 480,-227 480,-203 543,-203 543,-227"/>
<text text-anchor="middle" x="511.5" y="-212.6" font-family="Helvetica,sans-Serif" font-size="10.50" fill="white">call_hooks</text>
</a>
</g>
</g>
<!-- proc~pf_pfasst_block_oc&#45;&gt;proc~call_hooks -->
<g id="proc~~pf_pfasst_block_oc~~CallsGraph_edge4" class="edge"><title>proc~pf_pfasst_block_oc&#45;&gt;proc~call_hooks</title>
<path fill="none" stroke="#000000" d="M83.8443,-238.95C149.756,-214.766 309.151,-164.636 442,-189 453.399,-191.091 465.361,-194.986 476.041,-199.138"/>
<polygon fill="#000000" stroke="#000000" points="474.855,-202.434 485.436,-202.977 477.503,-195.954 474.855,-202.434"/>
</g>
<!-- proc~pf_predictor_oc -->
<g id="proc~~pf_pfasst_block_oc~~CallsGraph_node6" class="node"><title>proc~pf_predictor_oc</title>
<g id="a_proc~~pf_pfasst_block_oc~~CallsGraph_node6"><a xlink:href=".././proc/pf_predictor_oc.html" xlink:title="pf_predictor_oc">
<polygon fill="#d9534f" stroke="#d9534f" points="253.5,-422 166.5,-422 166.5,-398 253.5,-398 253.5,-422"/>
<text text-anchor="middle" x="210" y="-407.6" font-family="Helvetica,sans-Serif" font-size="10.50" fill="white">pf_predictor_oc</text>
</a>
</g>
</g>
<!-- proc~pf_pfasst_block_oc&#45;&gt;proc~pf_predictor_oc -->
<g id="proc~~pf_pfasst_block_oc~~CallsGraph_edge5" class="edge"><title>proc~pf_pfasst_block_oc&#45;&gt;proc~pf_predictor_oc</title>
<path fill="none" stroke="#000000" d="M62.283,-263.215C77.5447,-282.977 109.314,-322.794 140,-353 154.03,-366.811 171.074,-380.913 184.713,-391.636"/>
<polygon fill="#000000" stroke="#000000" points="182.661,-394.474 192.707,-397.843 186.954,-388.945 182.661,-394.474"/>
</g>
<!-- proc~start_timer -->
<g id="proc~~pf_pfasst_block_oc~~CallsGraph_node7" class="node"><title>proc~start_timer</title>
<g id="a_proc~~pf_pfasst_block_oc~~CallsGraph_node7"><a xlink:href=".././proc/start_timer.html" xlink:title="start_timer">
<polygon fill="#d9534f" stroke="#d9534f" points="651.5,-285 587.5,-285 587.5,-261 651.5,-261 651.5,-285"/>
<text text-anchor="middle" x="619.5" y="-270.6" font-family="Helvetica,sans-Serif" font-size="10.50" fill="white">start_timer</text>
</a>
</g>
</g>
<!-- proc~pf_pfasst_block_oc&#45;&gt;proc~start_timer -->
<g id="proc~~pf_pfasst_block_oc~~CallsGraph_edge6" class="edge"><title>proc~pf_pfasst_block_oc&#45;&gt;proc~start_timer</title>
<path fill="none" stroke="#000000" d="M63.9766,-238.993C79.2489,-223.236 108.592,-196.265 140,-185 309.44,-124.228 383.937,-100.615 545,-181 575.115,-196.03 596.895,-229.779 608.605,-251.953"/>
<polygon fill="#000000" stroke="#000000" points="605.508,-253.586 613.136,-260.939 611.758,-250.434 605.508,-253.586"/>
</g>
<!-- proc~pf_check_convergence_oc&#45;&gt;proc~call_hooks -->
<g id="proc~~pf_pfasst_block_oc~~CallsGraph_edge7" class="edge"><title>proc~pf_check_convergence_oc&#45;&gt;proc~call_hooks</title>
<path fill="none" stroke="#000000" d="M246.665,-66.0085C293.489,-82.5927 377.324,-115.143 442,-156 460.022,-167.385 478.201,-183.295 491.298,-195.725"/>
<polygon fill="#000000" stroke="#000000" points="489.132,-198.5 498.75,-202.944 494.003,-193.472 489.132,-198.5"/>
</g>
<!-- proc~pf_check_residual_oc -->
<g id="proc~~pf_pfasst_block_oc~~CallsGraph_node9" class="node"><title>proc~pf_check_residual_oc</title>
<g id="a_proc~~pf_pfasst_block_oc~~CallsGraph_node9"><a xlink:href=".././proc/pf_check_residual_oc.html" xlink:title="pf_check_residual_oc">
<polygon fill="#d9534f" stroke="#d9534f" points="437,-24 321,-24 321,-0 437,-0 437,-24"/>
<text text-anchor="middle" x="379" y="-9.6" font-family="Helvetica,sans-Serif" font-size="10.50" fill="white">pf_check_residual_oc</text>
</a>
</g>
</g>
<!-- proc~pf_check_convergence_oc&#45;&gt;proc~pf_check_residual_oc -->
<g id="proc~~pf_pfasst_block_oc~~CallsGraph_edge9" class="edge"><title>proc~pf_check_convergence_oc&#45;&gt;proc~pf_check_residual_oc</title>
<path fill="none" stroke="#000000" d="M258.855,-41.9645C277.985,-37.1536 300.186,-31.57 320.204,-26.5355"/>
<polygon fill="#000000" stroke="#000000" points="321.293,-29.8707 330.138,-24.0373 319.586,-23.0821 321.293,-29.8707"/>
</g>
<!-- proc~pf_send_status -->
<g id="proc~~pf_pfasst_block_oc~~CallsGraph_node15" class="node"><title>proc~pf_send_status</title>
<g id="a_proc~~pf_pfasst_block_oc~~CallsGraph_node15"><a xlink:href=".././proc/pf_send_status.html" xlink:title="pf_send_status">
<polygon fill="#d9534f" stroke="#d9534f" points="421.5,-66 336.5,-66 336.5,-42 421.5,-42 421.5,-66"/>
<text text-anchor="middle" x="379" y="-51.6" font-family="Helvetica,sans-Serif" font-size="10.50" fill="white">pf_send_status</text>
</a>
</g>
</g>
<!-- proc~pf_check_convergence_oc&#45;&gt;proc~pf_send_status -->
<g id="proc~~pf_pfasst_block_oc~~CallsGraph_edge8" class="edge"><title>proc~pf_check_convergence_oc&#45;&gt;proc~pf_send_status</title>
<path fill="none" stroke="#000000" d="M280.372,-54C295.66,-54 311.599,-54 326.057,-54"/>
<polygon fill="#000000" stroke="#000000" points="326.293,-57.5001 336.293,-54 326.293,-50.5001 326.293,-57.5001"/>
</g>
<!-- proc~restrict_time_space_fas -->
<g id="proc~~pf_pfasst_block_oc~~CallsGraph_node8" class="node"><title>proc~restrict_time_space_fas</title>
<g id="a_proc~~pf_pfasst_block_oc~~CallsGraph_node8"><a xlink:href=".././proc/restrict_time_space_fas.html" xlink:title="restrict_time_space_fas">
<polygon fill="#d9534f" stroke="#d9534f" points="442,-264 316,-264 316,-240 442,-240 442,-264"/>
<text text-anchor="middle" x="379" y="-249.6" font-family="Helvetica,sans-Serif" font-size="10.50" fill="white">restrict_time_space_fas</text>
</a>
</g>
</g>
<!-- proc~pf_v_cycle_oc&#45;&gt;proc~restrict_time_space_fas -->
<g id="proc~~pf_pfasst_block_oc~~CallsGraph_edge10" class="edge"><title>proc~pf_v_cycle_oc&#45;&gt;proc~restrict_time_space_fas</title>
<path fill="none" stroke="#000000" d="M233.28,-319.901C254.364,-308.604 287.014,-291.506 316,-278 323.216,-274.638 330.987,-271.222 338.507,-268.019"/>
<polygon fill="#000000" stroke="#000000" points="339.973,-271.199 347.835,-264.096 337.26,-264.746 339.973,-271.199"/>
</g>
<!-- proc~pf_post -->
<g id="proc~~pf_pfasst_block_oc~~CallsGraph_node10" class="node"><title>proc~pf_post</title>
<g id="a_proc~~pf_pfasst_block_oc~~CallsGraph_node10"><a xlink:href=".././proc/pf_post.html" xlink:title="pf_post">
<polygon fill="#d9534f" stroke="#d9534f" points="406,-222 352,-222 352,-198 406,-198 406,-222"/>
<text text-anchor="middle" x="379" y="-207.6" font-family="Helvetica,sans-Serif" font-size="10.50" fill="white">pf_post</text>
</a>
</g>
</g>
<!-- proc~pf_v_cycle_oc&#45;&gt;proc~pf_post -->
<g id="proc~~pf_pfasst_block_oc~~CallsGraph_edge11" class="edge"><title>proc~pf_v_cycle_oc&#45;&gt;proc~pf_post</title>
<path fill="none" stroke="#000000" d="M220.418,-319.97C237.388,-299.051 275.152,-255.835 316,-231 323.973,-226.153 333.208,-222.255 342.077,-219.195"/>
<polygon fill="#000000" stroke="#000000" points="343.376,-222.455 351.847,-216.092 341.257,-215.784 343.376,-222.455"/>
</g>
<!-- proc~pf_residual -->
<g id="proc~~pf_pfasst_block_oc~~CallsGraph_node11" class="node"><title>proc~pf_residual</title>
<g id="a_proc~~pf_pfasst_block_oc~~CallsGraph_node11"><a xlink:href=".././proc/pf_residual.html" xlink:title="pf_residual">
<polygon fill="#d9534f" stroke="#d9534f" points="544,-459 479,-459 479,-435 544,-435 544,-459"/>
<text text-anchor="middle" x="511.5" y="-444.6" font-family="Helvetica,sans-Serif" font-size="10.50" fill="white">pf_residual</text>
</a>
</g>
</g>
<!-- proc~pf_v_cycle_oc&#45;&gt;proc~pf_residual -->
<g id="proc~~pf_pfasst_block_oc~~CallsGraph_edge12" class="edge"><title>proc~pf_v_cycle_oc&#45;&gt;proc~pf_residual</title>
<path fill="none" stroke="#000000" d="M243.183,-344.127C287.858,-360.991 371.172,-392.551 442,-420 451.289,-423.6 461.27,-427.51 470.661,-431.208"/>
<polygon fill="#000000" stroke="#000000" points="469.594,-434.549 480.18,-434.963 472.162,-428.037 469.594,-434.549"/>
</g>
<!-- proc~interpolate_time_space -->
<g id="proc~~pf_pfasst_block_oc~~CallsGraph_node12" class="node"><title>proc~interpolate_time_space</title>
<g id="a_proc~~pf_pfasst_block_oc~~CallsGraph_node12"><a xlink:href=".././proc/interpolate_time_space.html" xlink:title="interpolate_time_space">
<polygon fill="#d9534f" stroke="#d9534f" points="441,-344 317,-344 317,-320 441,-320 441,-344"/>
<text text-anchor="middle" x="379" y="-329.6" font-family="Helvetica,sans-Serif" font-size="10.50" fill="white">interpolate_time_space</text>
</a>
</g>
</g>
<!-- proc~pf_v_cycle_oc&#45;&gt;proc~interpolate_time_space -->
<g id="proc~~pf_pfasst_block_oc~~CallsGraph_edge15" class="edge"><title>proc~pf_v_cycle_oc&#45;&gt;proc~interpolate_time_space</title>
<path fill="none" stroke="#000000" d="M250.154,-332C267.066,-332 287.397,-332 306.819,-332"/>
<polygon fill="#000000" stroke="#000000" points="306.869,-335.5 316.869,-332 306.869,-328.5 306.869,-335.5"/>
</g>
<!-- proc~pf_send -->
<g id="proc~~pf_pfasst_block_oc~~CallsGraph_node13" class="node"><title>proc~pf_send</title>
<g id="a_proc~~pf_pfasst_block_oc~~CallsGraph_node13"><a xlink:href=".././proc/pf_send.html" xlink:title="pf_send">
<polygon fill="#d9534f" stroke="#d9534f" points="406,-542 352,-542 352,-518 406,-518 406,-542"/>
<text text-anchor="middle" x="379" y="-527.6" font-family="Helvetica,sans-Serif" font-size="10.50" fill="white">pf_send</text>
</a>
</g>
</g>
<!-- proc~pf_v_cycle_oc&#45;&gt;proc~pf_send -->
<g id="proc~~pf_pfasst_block_oc~~CallsGraph_edge13" class="edge"><title>proc~pf_v_cycle_oc&#45;&gt;proc~pf_send</title>
<path fill="none" stroke="#000000" d="M231.323,-344.058C246.777,-354.217 267.456,-370.098 280,-389 310.789,-435.395 277.325,-468.942 316,-509 322.972,-516.221 332.512,-520.959 342.02,-524.068"/>
<polygon fill="#000000" stroke="#000000" points="341.237,-527.482 351.806,-526.754 343.089,-520.732 341.237,-527.482"/>
</g>
<!-- proc~pf_recv -->
<g id="proc~~pf_pfasst_block_oc~~CallsGraph_node14" class="node"><title>proc~pf_recv</title>
<g id="a_proc~~pf_pfasst_block_oc~~CallsGraph_node14"><a xlink:href=".././proc/pf_recv.html" xlink:title="pf_recv">
<polygon fill="#d9534f" stroke="#d9534f" points="406,-500 352,-500 352,-476 406,-476 406,-500"/>
<text text-anchor="middle" x="379" y="-485.6" font-family="Helvetica,sans-Serif" font-size="10.50" fill="white">pf_recv</text>
</a>
</g>
</g>
<!-- proc~pf_v_cycle_oc&#45;&gt;proc~pf_recv -->
<g id="proc~~pf_pfasst_block_oc~~CallsGraph_edge14" class="edge"><title>proc~pf_v_cycle_oc&#45;&gt;proc~pf_recv</title>
<path fill="none" stroke="#000000" d="M226.444,-344.029C240.677,-355.284 262.222,-372.752 280,-389 308.841,-415.358 340.309,-447.876 359.603,-468.281"/>
<polygon fill="#000000" stroke="#000000" points="357.205,-470.841 366.608,-475.724 362.303,-466.043 357.205,-470.841"/>
</g>
<!-- proc~call_hooks&#45;&gt;proc~end_timer -->
<g id="proc~~pf_pfasst_block_oc~~CallsGraph_edge17" class="edge"><title>proc~call_hooks&#45;&gt;proc~end_timer</title>
<path fill="none" stroke="#000000" d="M530.775,-227.115C535.843,-231.1 541.037,-235.844 545,-241 580.187,-286.778 602.528,-352.028 612.478,-385.815"/>
<polygon fill="#000000" stroke="#000000" points="609.165,-386.959 615.274,-395.615 615.896,-385.038 609.165,-386.959"/>
</g>
<!-- proc~call_hooks&#45;&gt;proc~start_timer -->
<g id="proc~~pf_pfasst_block_oc~~CallsGraph_edge16" class="edge"><title>proc~call_hooks&#45;&gt;proc~start_timer</title>
<path fill="none" stroke="#000000" d="M534.463,-227.018C549.813,-235.417 570.525,-246.75 587.546,-256.063"/>
<polygon fill="#000000" stroke="#000000" points="586.112,-259.268 596.565,-260.998 589.472,-253.127 586.112,-259.268"/>
</g>
<!-- proc~pf_predictor_oc&#45;&gt;proc~end_timer -->
<g id="proc~~pf_pfasst_block_oc~~CallsGraph_edge18" class="edge"><title>proc~pf_predictor_oc&#45;&gt;proc~end_timer</title>
<path fill="none" stroke="#000000" d="M215.529,-422.031C227.085,-450.756 260.717,-523.026 316,-551 406.814,-596.953 458.201,-605.149 545,-552 588.658,-525.268 607.415,-463.537 614.592,-430.244"/>
<polygon fill="#000000" stroke="#000000" points="618.085,-430.625 616.602,-420.135 611.219,-429.26 618.085,-430.625"/>
</g>
<!-- proc~pf_predictor_oc&#45;&gt;proc~call_hooks -->
<g id="proc~~pf_pfasst_block_oc~~CallsGraph_edge22" class="edge"><title>proc~pf_predictor_oc&#45;&gt;proc~call_hooks</title>
<path fill="none" stroke="#000000" d="M227.284,-397.833C241.704,-386.763 263.038,-369.657 280,-353 297.542,-335.774 295.402,-324.423 316,-311 365.004,-279.066 392.806,-304.641 442,-273 460.005,-261.419 459.417,-250.01 477.023,-233.817"/>
<polygon fill="#000000" stroke="#000000" points="479.639,-236.194 485.082,-227.104 475.159,-230.815 479.639,-236.194"/>
</g>
<!-- proc~pf_predictor_oc&#45;&gt;proc~start_timer -->
<g id="proc~~pf_pfasst_block_oc~~CallsGraph_edge24" class="edge"><title>proc~pf_predictor_oc&#45;&gt;proc~start_timer</title>
<path fill="none" stroke="#000000" d="M253.693,-405.084C319.038,-396.354 446.62,-374.505 545,-328 564.633,-318.719 584.189,-303.737 598.188,-291.751"/>
<polygon fill="#000000" stroke="#000000" points="600.547,-294.337 605.746,-285.106 595.925,-289.08 600.547,-294.337"/>
</g>
<!-- proc~pf_predictor_oc&#45;&gt;proc~restrict_time_space_fas -->
<g id="proc~~pf_pfasst_block_oc~~CallsGraph_edge19" class="edge"><title>proc~pf_predictor_oc&#45;&gt;proc~restrict_time_space_fas</title>
<path fill="none" stroke="#000000" d="M229.914,-397.796C244.982,-387.332 265.829,-371.111 280,-353 302.784,-323.88 289.204,-303.477 316,-278 319.711,-274.471 323.972,-271.388 328.484,-268.702"/>
<polygon fill="#000000" stroke="#000000" points="330.175,-271.768 337.393,-264.013 326.914,-265.573 330.175,-271.768"/>
</g>
<!-- proc~pf_predictor_oc&#45;&gt;proc~pf_residual -->
<g id="proc~~pf_pfasst_block_oc~~CallsGraph_edge20" class="edge"><title>proc~pf_predictor_oc&#45;&gt;proc~pf_residual</title>
<path fill="none" stroke="#000000" d="M253.639,-415.831C272.709,-418.402 295.472,-421.418 316,-424 368.648,-430.622 429.385,-437.718 468.784,-442.248"/>
<polygon fill="#000000" stroke="#000000" points="468.481,-445.736 478.815,-443.399 469.279,-438.782 468.481,-445.736"/>
</g>
<!-- proc~pf_predictor_oc&#45;&gt;proc~interpolate_time_space -->
<g id="proc~~pf_pfasst_block_oc~~CallsGraph_edge25" class="edge"><title>proc~pf_predictor_oc&#45;&gt;proc~interpolate_time_space</title>
<path fill="none" stroke="#000000" d="M236.728,-397.983C265.168,-384.7 311.147,-363.225 342.885,-348.401"/>
<polygon fill="#000000" stroke="#000000" points="344.664,-351.433 352.243,-344.03 341.701,-345.091 344.664,-351.433"/>
</g>
<!-- proc~pf_predictor_oc&#45;&gt;proc~pf_send -->
<g id="proc~~pf_pfasst_block_oc~~CallsGraph_edge21" class="edge"><title>proc~pf_predictor_oc&#45;&gt;proc~pf_send</title>
<path fill="none" stroke="#000000" d="M220.745,-422.108C237.927,-442.716 275.632,-484.731 316,-509 323.997,-513.807 333.241,-517.691 342.11,-520.749"/>
<polygon fill="#000000" stroke="#000000" points="341.288,-524.16 351.878,-523.857 343.41,-517.49 341.288,-524.16"/>
</g>
<!-- proc~pf_predictor_oc&#45;&gt;proc~pf_recv -->
<g id="proc~~pf_pfasst_block_oc~~CallsGraph_edge23" class="edge"><title>proc~pf_predictor_oc&#45;&gt;proc~pf_recv</title>
<path fill="none" stroke="#000000" d="M234.566,-422.2C255.714,-433.021 287.69,-449.069 316,-462 324.485,-465.876 333.715,-469.866 342.398,-473.521"/>
<polygon fill="#000000" stroke="#000000" points="341.323,-476.864 351.9,-477.481 344.016,-470.403 341.323,-476.864"/>
</g>
<!-- proc~restrict_time_space_fas&#45;&gt;proc~end_timer -->
<g id="proc~~pf_pfasst_block_oc~~CallsGraph_edge29" class="edge"><title>proc~restrict_time_space_fas&#45;&gt;proc~end_timer</title>
<path fill="none" stroke="#000000" d="M398.715,-264.241C440.686,-291.694 542.474,-358.272 591.382,-390.262"/>
<polygon fill="#000000" stroke="#000000" points="589.588,-393.271 599.872,-395.816 593.419,-387.413 589.588,-393.271"/>
</g>
<!-- proc~restrict_time_space_fas&#45;&gt;proc~call_hooks -->
<g id="proc~~pf_pfasst_block_oc~~CallsGraph_edge26" class="edge"><title>proc~restrict_time_space_fas&#45;&gt;proc~call_hooks</title>
<path fill="none" stroke="#000000" d="M422.37,-239.987C437.754,-235.625 455.082,-230.712 470.277,-226.404"/>
<polygon fill="#000000" stroke="#000000" points="471.245,-229.768 479.911,-223.673 469.336,-223.033 471.245,-229.768"/>
</g>
<!-- proc~restrict_time_space_fas&#45;&gt;proc~start_timer -->
<g id="proc~~pf_pfasst_block_oc~~CallsGraph_edge28" class="edge"><title>proc~restrict_time_space_fas&#45;&gt;proc~start_timer</title>
<path fill="none" stroke="#000000" d="M424.216,-239.926C430.409,-237.415 436.521,-234.456 442,-231 461.405,-218.757 456.863,-202.925 478,-194 505.432,-182.416 517.699,-182.111 545,-194 572.011,-205.763 593.573,-232.887 606.188,-252.06"/>
<polygon fill="#000000" stroke="#000000" points="603.357,-254.133 611.646,-260.731 609.281,-250.404 603.357,-254.133"/>
</g>
<!-- proc~restrict_sdc -->
<g id="proc~~pf_pfasst_block_oc~~CallsGraph_node17" class="node"><title>proc~restrict_sdc</title>
<g id="a_proc~~pf_pfasst_block_oc~~CallsGraph_node17"><a xlink:href=".././proc/restrict_sdc.html" xlink:title="restrict_sdc">
<polygon fill="#d9534f" stroke="#d9534f" points="545,-66 478,-66 478,-42 545,-42 545,-66"/>
<text text-anchor="middle" x="511.5" y="-51.6" font-family="Helvetica,sans-Serif" font-size="10.50" fill="white">restrict_sdc</text>
</a>
</g>
</g>
<!-- proc~restrict_time_space_fas&#45;&gt;proc~restrict_sdc -->
<g id="proc~~pf_pfasst_block_oc~~CallsGraph_edge27" class="edge"><title>proc~restrict_time_space_fas&#45;&gt;proc~restrict_sdc</title>
<path fill="none" stroke="#000000" d="M429.401,-239.929C433.997,-237.481 438.307,-234.538 442,-231 465.144,-208.823 492.676,-118.117 504.557,-75.8575"/>
<polygon fill="#000000" stroke="#000000" points="507.991,-76.5718 507.291,-66.0001 501.246,-74.701 507.991,-76.5718"/>
</g>
<!-- proc~pf_residual&#45;&gt;proc~end_timer -->
<g id="proc~~pf_pfasst_block_oc~~CallsGraph_edge31" class="edge"><title>proc~pf_residual&#45;&gt;proc~end_timer</title>
<path fill="none" stroke="#000000" d="M544.017,-435.404C555.078,-431.335 567.642,-426.712 579.258,-422.438"/>
<polygon fill="#000000" stroke="#000000" points="580.563,-425.687 588.74,-418.95 578.146,-419.118 580.563,-425.687"/>
</g>
<!-- proc~pf_residual&#45;&gt;proc~start_timer -->
<g id="proc~~pf_pfasst_block_oc~~CallsGraph_edge30" class="edge"><title>proc~pf_residual&#45;&gt;proc~start_timer</title>
<path fill="none" stroke="#000000" d="M530.625,-434.767C535.69,-430.779 540.918,-426.063 545,-421 577.052,-381.242 600.068,-325.215 611.116,-294.768"/>
<polygon fill="#000000" stroke="#000000" points="614.489,-295.729 614.52,-285.134 607.889,-293.397 614.489,-295.729"/>
</g>
<!-- proc~interpolate_time_space&#45;&gt;proc~end_timer -->
<g id="proc~~pf_pfasst_block_oc~~CallsGraph_edge35" class="edge"><title>proc~interpolate_time_space&#45;&gt;proc~end_timer</title>
<path fill="none" stroke="#000000" d="M417.791,-344.042C461.874,-358.09 534.405,-381.203 579.147,-395.46"/>
<polygon fill="#000000" stroke="#000000" points="578.207,-398.834 588.798,-398.535 580.332,-392.164 578.207,-398.834"/>
</g>
<!-- proc~interpolate_time_space&#45;&gt;proc~call_hooks -->
<g id="proc~~pf_pfasst_block_oc~~CallsGraph_edge32" class="edge"><title>proc~interpolate_time_space&#45;&gt;proc~call_hooks</title>
<path fill="none" stroke="#000000" d="M417.819,-319.88C426.253,-316.189 434.815,-311.591 442,-306 466.789,-286.709 487.188,-256.323 499.101,-236.037"/>
<polygon fill="#000000" stroke="#000000" points="502.202,-237.665 504.107,-227.243 496.118,-234.202 502.202,-237.665"/>
</g>
<!-- proc~interpolate_time_space&#45;&gt;proc~start_timer -->
<g id="proc~~pf_pfasst_block_oc~~CallsGraph_edge34" class="edge"><title>proc~interpolate_time_space&#45;&gt;proc~start_timer</title>
<path fill="none" stroke="#000000" d="M441.25,-326.89C472.727,-323.222 511.425,-317.086 545,-307 559.378,-302.681 574.55,-296.049 587.351,-289.786"/>
<polygon fill="#000000" stroke="#000000" points="589.27,-292.738 596.626,-285.113 586.12,-286.487 589.27,-292.738"/>
</g>
<!-- proc~pf_apply_mat -->
<g id="proc~~pf_pfasst_block_oc~~CallsGraph_node18" class="node"><title>proc~pf_apply_mat</title>
<g id="a_proc~~pf_pfasst_block_oc~~CallsGraph_node18"><a xlink:href=".././proc/pf_apply_mat.html" xlink:title="pf_apply_mat">
<polygon fill="#d9534f" stroke="#d9534f" points="658,-184 581,-184 581,-160 658,-160 658,-184"/>
<text text-anchor="middle" x="619.5" y="-169.6" font-family="Helvetica,sans-Serif" font-size="10.50" fill="white">pf_apply_mat</text>
</a>
</g>
</g>
<!-- proc~interpolate_time_space&#45;&gt;proc~pf_apply_mat -->
<g id="proc~~pf_pfasst_block_oc~~CallsGraph_edge33" class="edge"><title>proc~interpolate_time_space&#45;&gt;proc~pf_apply_mat</title>
<path fill="none" stroke="#000000" d="M412.112,-319.964C421.899,-315.918 432.561,-311.12 442,-306 490.653,-279.61 501.162,-269.789 545,-236 563.657,-221.62 583.759,-203.953 598.217,-190.826"/>
<polygon fill="#000000" stroke="#000000" points="600.607,-193.383 605.623,-184.051 595.882,-188.218 600.607,-193.383"/>
</g>
<!-- start_timer -->
<g id="proc~~pf_pfasst_block_oc~~CallsGraph_node16" class="node"><title>start_timer</title>
<polygon fill="#777777" stroke="#777777" points="543.5,-543 479.5,-543 479.5,-519 543.5,-519 543.5,-543"/>
<text text-anchor="middle" x="511.5" y="-528.6" font-family="Helvetica,sans-Serif" font-size="10.50" fill="white">start_timer</text>
</g>
<!-- proc~pf_send&#45;&gt;start_timer -->
<g id="proc~~pf_pfasst_block_oc~~CallsGraph_edge36" class="edge"><title>proc~pf_send&#45;&gt;start_timer</title>
<path fill="none" stroke="#000000" d="M406.095,-530.2C424.166,-530.338 448.596,-530.526 469.28,-530.684"/>
<polygon fill="#000000" stroke="#000000" points="469.368,-534.185 479.395,-530.762 469.422,-527.185 469.368,-534.185"/>
</g>
<!-- end_timer -->
<g id="proc~~pf_pfasst_block_oc~~CallsGraph_node19" class="node"><title>end_timer</title>
<polygon fill="#777777" stroke="#777777" points="542,-501 481,-501 481,-477 542,-477 542,-501"/>
<text text-anchor="middle" x="511.5" y="-486.6" font-family="Helvetica,sans-Serif" font-size="10.50" fill="white">end_timer</text>
</g>
<!-- proc~pf_send&#45;&gt;end_timer -->
<g id="proc~~pf_pfasst_block_oc~~CallsGraph_edge37" class="edge"><title>proc~pf_send&#45;&gt;end_timer</title>
<path fill="none" stroke="#000000" d="M406.095,-521.802C424.716,-515.951 450.089,-507.98 471.159,-501.36"/>
<polygon fill="#000000" stroke="#000000" points="472.311,-504.667 480.802,-498.33 470.213,-497.989 472.311,-504.667"/>
</g>
<!-- proc~pf_recv&#45;&gt;start_timer -->
<g id="proc~~pf_pfasst_block_oc~~CallsGraph_edge38" class="edge"><title>proc~pf_recv&#45;&gt;start_timer</title>
<path fill="none" stroke="#000000" d="M406.095,-496.598C424.331,-502.607 449.042,-510.75 469.846,-517.604"/>
<polygon fill="#000000" stroke="#000000" points="468.802,-520.945 479.395,-520.751 470.993,-514.297 468.802,-520.945"/>
</g>
<!-- proc~pf_recv&#45;&gt;end_timer -->
<g id="proc~~pf_pfasst_block_oc~~CallsGraph_edge39" class="edge"><title>proc~pf_recv&#45;&gt;end_timer</title>
<path fill="none" stroke="#000000" d="M406.095,-488.2C424.548,-488.341 449.631,-488.534 470.586,-488.694"/>
<polygon fill="#000000" stroke="#000000" points="470.776,-492.196 480.802,-488.772 470.829,-485.196 470.776,-492.196"/>
</g>
<!-- proc~restrict_sdc&#45;&gt;proc~pf_apply_mat -->
<g id="proc~~pf_pfasst_block_oc~~CallsGraph_edge40" class="edge"><title>proc~restrict_sdc&#45;&gt;proc~pf_apply_mat</title>
<path fill="none" stroke="#000000" d="M528.971,-66.0235C534.3,-70.2105 540.097,-75.0934 545,-80 567.705,-102.72 590.226,-132.206 604.236,-151.595"/>
<polygon fill="#000000" stroke="#000000" points="601.562,-153.872 610.219,-159.98 607.26,-149.806 601.562,-153.872"/>
</g>
</g>
</svg>
</div><script>var panprocpf_pfasst_block_ocCallsGraph = svgPanZoom('#procpf_pfasst_block_ocCallsGraph', {zoomEnabled: true,controlIconsEnabled: true, fit: true, center: true,}); </script><div><a type="button" class="graph-help" data-toggle="modal" href="#graph-help-text">Help</a></div><div class="modal fade" id="graph-help-text" tabindex="-1" role="dialog"><div class="modal-dialog modal-lg" role="document"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><h4 class="modal-title" id="-graph-help-label">Graph Key</h4></div><div class="modal-body">
    <p>Nodes of different colours represent the following: </p>
    <?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.38.0 (20140413.2041)
 -->
<!-- Title: Graph Key Pages: 1 -->
<svg width="560pt" height="32pt"
 viewBox="0.00 0.00 559.50 32.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 28)">
<title>Graph Key</title>
<polygon fill="white" stroke="none" points="-4,4 -4,-28 555.5,-28 555.5,4 -4,4"/>
<!-- Subroutine -->
<g id="node1" class="node"><title>Subroutine</title>
<polygon fill="#d9534f" stroke="#d9534f" points="64,-24 0,-24 0,-0 64,-0 64,-24"/>
<text text-anchor="middle" x="32" y="-9.6" font-family="Helvetica,sans-Serif" font-size="10.50" fill="white">Subroutine</text>
</g>
<!-- Function -->
<g id="node2" class="node"><title>Function</title>
<polygon fill="#d94e8f" stroke="#d94e8f" points="136,-24 82,-24 82,-0 136,-0 136,-24"/>
<text text-anchor="middle" x="109" y="-9.6" font-family="Helvetica,sans-Serif" font-size="10.50" fill="white">Function</text>
</g>
<!-- Interface -->
<g id="node3" class="node"><title>Interface</title>
<polygon fill="#a7506f" stroke="#a7506f" points="209.5,-24 154.5,-24 154.5,-0 209.5,-0 209.5,-24"/>
<text text-anchor="middle" x="182" y="-9.6" font-family="Helvetica,sans-Serif" font-size="10.50" fill="white">Interface</text>
</g>
<!-- Unknown Procedure Type -->
<g id="node4" class="node"><title>Unknown Procedure Type</title>
<polygon fill="#777777" stroke="#777777" points="364,-24 228,-24 228,-0 364,-0 364,-24"/>
<text text-anchor="middle" x="296" y="-9.6" font-family="Helvetica,sans-Serif" font-size="10.50" fill="white">Unknown Procedure Type</text>
</g>
<!-- Program -->
<g id="node5" class="node"><title>Program</title>
<polygon fill="#f0ad4e" stroke="#f0ad4e" points="436,-24 382,-24 382,-0 436,-0 436,-24"/>
<text text-anchor="middle" x="409" y="-9.6" font-family="Helvetica,sans-Serif" font-size="10.50" fill="white">Program</text>
</g>
<!-- This Page&#39;s Entity -->
<g id="node6" class="node"><title>This Page&#39;s Entity</title>
<polygon fill="none" stroke="black" points="551.5,-24 454.5,-24 454.5,-0 551.5,-0 551.5,-24"/>
<text text-anchor="middle" x="503" y="-9.6" font-family="Helvetica,sans-Serif" font-size="10.50">This Page&#39;s Entity</text>
</g>
</g>
</svg>

    
    <p>Solid arrows point from a procedure to one which it calls. Dashed 
    arrows point from an interface to procedures which implement that interface.
    This could include the module procedures in a generic interface or the
    implementation in a submodule of an interface in a parent module.
    </p>
    </div></div></div></div>
      </div>
    </div>
     
     
    <br>

    <section class="visible-xs visible-sm hidden-md">
      
<h3>Contents</h3>
 





















<div class="panel panel-primary">
  <div class="panel-heading text-left"><h3 class="panel-title">Source Code</h3></div>
  <div class="list-group">
    <a class="list-group-item" href="../proc/pf_pfasst_block_oc.html#src">pf_pfasst_block_oc</a>
  </div>
</div>



    </section>
    <br class="visible-xs visible-sm hidden-md">

    

    
    
    
    
    

    
    
    
    
    


    
    
    
    <section>
    <h2><span class="anchor" id="src"></span>Source Code</h2>
    <div class="highlight"><pre><span></span>  <span class="k">subroutine </span><span class="n">pf_pfasst_block_oc</span><span class="p">(</span><span class="n">pf</span><span class="p">,</span> <span class="n">dt</span><span class="p">,</span> <span class="n">nsteps</span><span class="p">,</span> <span class="n">predict</span><span class="p">,</span> <span class="n">flags</span><span class="p">,</span> <span class="n">step</span><span class="p">)</span>
    <span class="k">type</span><span class="p">(</span><span class="n">pf_pfasst_t</span><span class="p">),</span> <span class="k">intent</span><span class="p">(</span><span class="n">inout</span><span class="p">),</span> <span class="k">target</span> <span class="kd">::</span> <span class="n">pf</span>
    <span class="kt">real</span><span class="p">(</span><span class="n">pfdp</span><span class="p">),</span>        <span class="k">intent</span><span class="p">(</span><span class="n">in</span><span class="p">)</span>    <span class="kd">::</span> <span class="n">dt</span>
    <span class="kt">integer</span><span class="p">,</span>           <span class="k">intent</span><span class="p">(</span><span class="n">in</span><span class="p">)</span>    <span class="kd">::</span> <span class="n">nsteps</span> 
    <span class="kt">logical</span><span class="p">,</span>           <span class="k">intent</span><span class="p">(</span><span class="n">in</span><span class="p">)</span>    <span class="kd">::</span> <span class="n">predict</span>
    <span class="kt">integer</span><span class="p">,</span> <span class="k">optional</span><span class="p">,</span> <span class="k">intent</span><span class="p">(</span><span class="n">in</span><span class="p">)</span>    <span class="kd">::</span> <span class="n">flags</span>    <span class="c">!0 (default): sweep on y and p, 1: just y, 2: just p</span>
    <span class="kt">integer</span><span class="p">,</span> <span class="k">optional</span><span class="p">,</span> <span class="k">intent</span><span class="p">(</span><span class="n">in</span><span class="p">)</span>    <span class="kd">::</span> <span class="n">step</span>
    <span class="c">! not yet clear how to handle send and receive for forward and backward combined </span>

    <span class="k">type</span><span class="p">(</span><span class="n">pf_level_t</span><span class="p">),</span> <span class="k">pointer</span> <span class="kd">::</span> <span class="n">fine_lev_p</span><span class="p">,</span> <span class="n">coarse_lev_p</span>
    <span class="kt">integer</span>                   <span class="kd">::</span> <span class="n">k</span><span class="p">,</span> <span class="n">j</span><span class="p">,</span> <span class="n">l</span><span class="p">,</span> <span class="n">which</span><span class="p">,</span> <span class="n">pred_flags</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="n">dir</span><span class="p">,</span> <span class="n">ierror</span> <span class="c">!dir to choose forward or backward send </span>
    <span class="kt">real</span><span class="p">(</span><span class="n">pfdp</span><span class="p">)</span>                <span class="kd">::</span> <span class="n">residual</span>

    <span class="kt">logical</span> <span class="kd">::</span> <span class="n">converged</span><span class="p">,</span> <span class="n">qbroadcast</span>
    <span class="kt">logical</span> <span class="kd">::</span> <span class="n">did_post_step_hook</span>

    <span class="k">call </span><span class="n">start_timer</span><span class="p">(</span><span class="n">pf</span><span class="p">,</span> <span class="n">TTOTAL</span><span class="p">)</span>

    <span class="n">which</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="k">if</span> <span class="p">(</span><span class="nb">present</span><span class="p">(</span><span class="n">flags</span><span class="p">))</span> <span class="n">which</span> <span class="o">=</span> <span class="n">flags</span>
    <span class="c">! send forward by default, even if sweeping on both components; send backwards if sweeping on p only</span>
    <span class="n">dir</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="k">if</span><span class="p">(</span><span class="n">which</span> <span class="o">==</span> <span class="mi">2</span><span class="p">)</span> <span class="n">dir</span> <span class="o">=</span> <span class="mi">2</span>
    <span class="n">pred_flags</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">=</span> <span class="n">which</span>
    
    <span class="k">if</span><span class="p">(</span> <span class="nb">present</span><span class="p">(</span><span class="n">step</span><span class="p">)</span> <span class="p">)</span> <span class="k">then</span>
<span class="k">      </span><span class="n">pf</span><span class="p">%</span><span class="n">state</span><span class="p">%</span><span class="n">step</span>    <span class="o">=</span> <span class="n">step</span>
    <span class="k">else</span>
<span class="k">      </span><span class="n">pf</span><span class="p">%</span><span class="n">state</span><span class="p">%</span><span class="n">step</span>    <span class="o">=</span> <span class="n">pf</span><span class="p">%</span><span class="n">rank</span>
    <span class="k">end if</span>
    
<span class="c">!     print *, pf%state%step</span>
      
    <span class="n">pf</span><span class="p">%</span><span class="n">state</span><span class="p">%</span><span class="n">dt</span>      <span class="o">=</span> <span class="n">dt</span>
    <span class="n">pf</span><span class="p">%</span><span class="n">state</span><span class="p">%</span><span class="n">proc</span>    <span class="o">=</span> <span class="n">pf</span><span class="p">%</span><span class="n">rank</span><span class="o">+</span><span class="mi">1</span>
    <span class="n">pf</span><span class="p">%</span><span class="n">state</span><span class="p">%</span><span class="n">t0</span>      <span class="o">=</span> <span class="n">pf</span><span class="p">%</span><span class="n">state</span><span class="p">%</span><span class="n">step</span> <span class="o">*</span> <span class="n">dt</span>
    <span class="n">pf</span><span class="p">%</span><span class="n">state</span><span class="p">%</span><span class="n">iter</span>    <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
    <span class="n">pf</span><span class="p">%</span><span class="n">state</span><span class="p">%</span><span class="k">cycle</span>   <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
<span class="c">!     pf%state%itcnt   = 0</span>
    <span class="n">pf</span><span class="p">%</span><span class="n">state</span><span class="p">%</span><span class="n">mysteps</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">pf</span><span class="p">%</span><span class="n">state</span><span class="p">%</span><span class="n">status</span>  <span class="o">=</span> <span class="n">PF_STATUS_PREDICTOR</span>
    <span class="n">pf</span><span class="p">%</span><span class="n">state</span><span class="p">%</span><span class="n">pstatus</span> <span class="o">=</span> <span class="n">PF_STATUS_PREDICTOR</span>
    <span class="n">pf</span><span class="p">%</span><span class="n">comm</span><span class="p">%</span><span class="n">statreq</span>  <span class="o">=</span> <span class="o">-</span><span class="mi">66</span>
    <span class="n">pf</span><span class="p">%</span><span class="n">state</span><span class="p">%</span><span class="n">nsteps</span>  <span class="o">=</span> <span class="n">nsteps</span>
<span class="c">!     pf%state%component = which</span>
    

    <span class="n">residual</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
    <span class="n">did_post_step_hook</span> <span class="o">=</span> <span class="p">.</span><span class="n">false</span><span class="p">.</span>
    
<span class="c">!    call pf%results%initialize(nsteps, pf%niters, pf%comm%nproc, pf%nlevels)</span>
    
<span class="c">!     do k = 1, 666666666 </span>
<span class="c">! </span>
<span class="c">!        qbroadcast = .false.</span>
<span class="c">! </span>
<span class="c">!        if (pf%state%status == PF_STATUS_CONVERGED .and. .not. did_post_step_hook) then</span>
<span class="c">!          call call_hooks(pf, -1, PF_POST_STEP)</span>
<span class="c">!          did_post_step_hook = .true.</span>
<span class="c">!          pf%state%itcnt = pf%state%itcnt + pf%state%iter</span>
<span class="c">!          pf%state%mysteps = pf%state%mysteps + 1</span>
<span class="c">!          exit</span>
<span class="c">!        end if</span>
<span class="c">! </span>
<span class="c">!        ! jump to next block if we&#39;ve reached the max iteration count</span>
<span class="c">!        if (pf%state%iter &gt;= pf%niters) then</span>
<span class="c">! !           print *, pf%rank, &#39;pf%state%iter &gt;= pf%niters&#39;</span>
<span class="c">!           if (.not. did_post_step_hook) then</span>
<span class="c">!             call call_hooks(pf, -1, PF_POST_STEP)</span>
<span class="c">!             pf%state%itcnt = pf%state%itcnt + pf%state%iter</span>
<span class="c">!             pf%state%mysteps = pf%state%mysteps + 1</span>
<span class="c">!           end if</span>
<span class="c">!           did_post_step_hook = .false.</span>
<span class="c">! </span>
<span class="c">!           pf%state%step = pf%state%step + pf%comm%nproc</span>
<span class="c">!           pf%state%t0   = pf%state%step * dt</span>
<span class="c">!           </span>
<span class="c">!           if (pf%state%step &gt;= pf%state%nsteps) exit  ! for optimal control this exit should always happen</span>
<span class="c">!           </span>
<span class="c">!           pf%state%status = PF_STATUS_PREDICTOR</span>
<span class="c">!           !pf%state%block  = pf%state%block + 1</span>
<span class="c">!           residual = -1</span>
<span class="c">!           qbroadcast = .true.</span>
<span class="c">!        end if</span>
<span class="c">! </span>
<span class="c">!        if (k &gt; 1 .and. qbroadcast) then</span>
<span class="c">!           if (pf%comm%nproc &gt; 1) then</span>
<span class="c">!              stop &quot;broadcast not supported&quot; </span>
<span class="c">!              !fine_lev_p =&gt; pf%levels(pf%nlevels)</span>
<span class="c">!              !call pf%comm%wait(pf, pf%nlevels)</span>
<span class="c">!              !call fine_lev_p%encap%pack(fine_lev_p%send, fine_lev_p%qend)</span>
<span class="c">!              !call pf_broadcast(pf, fine_lev_p%send, fine_lev_p%nvars, pf%comm%nproc-1)</span>
<span class="c">!              !call fine_lev_p%encap%unpack(fine_lev_p%q0,fine_lev_p%send)</span>
<span class="c">!           else</span>
<span class="c">!              stop &quot;we should not be here I guess&quot;</span>
<span class="c">!              ! for sequential optimal control, we need to save the Q(m) values for state solution</span>
<span class="c">!              ! and load them when solving the adjoint</span>
<span class="c">!              ! additionally, state solution is needed for objective, adjoint for gradient</span>
<span class="c">!              </span>
<span class="c">!              !print *, &#39;copying initial/terminal value&#39;</span>
<span class="c">!              fine_lev_p =&gt; pf%levels(pf%nlevels)</span>
<span class="c">!              if ((which .eq. 0) .or. (which .eq. 1)) call fine_lev_p%q0%copy(fine_lev_p%qend, 1)</span>
<span class="c">!              if (which .eq. 2) call fine_lev_p%qend%copy(fine_lev_p%q0, 2)</span>
<span class="c">!           end if</span>
<span class="c">!        end if</span>

<span class="c">!       if (pf%state%status == PF_STATUS_PREDICTOR) then</span>
<span class="c">!         !print *, &#39;pf%state%status == PF_STATUS_PREDICTOR&#39;, pf%state%t0, dt, which</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">predict</span><span class="p">)</span> <span class="k">then</span>
          <span class="c">!print *, &#39;calling predictor&#39;</span>
           <span class="k">call </span><span class="n">pf_predictor_oc</span><span class="p">(</span><span class="n">pf</span><span class="p">,</span> <span class="n">pf</span><span class="p">%</span><span class="n">state</span><span class="p">%</span><span class="n">t0</span><span class="p">,</span> <span class="n">dt</span><span class="p">,</span> <span class="n">pred_flags</span><span class="p">)</span>
        <span class="k">else</span>
<span class="k">           </span><span class="n">pf</span><span class="p">%</span><span class="n">state</span><span class="p">%</span><span class="n">iter</span> <span class="o">=</span> <span class="mi">0</span>
           <span class="n">pf</span><span class="p">%</span><span class="n">state</span><span class="p">%</span><span class="n">status</span>  <span class="o">=</span> <span class="n">PF_STATUS_ITERATING</span>
           <span class="n">pf</span><span class="p">%</span><span class="n">state</span><span class="p">%</span><span class="n">pstatus</span> <span class="o">=</span> <span class="n">PF_STATUS_ITERATING</span>
        <span class="k">end if</span>
<span class="c">!       end if    </span>
        <span class="k">call </span><span class="n">call_hooks</span><span class="p">(</span><span class="n">pf</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">PF_POST_ITERATION</span><span class="p">)</span>

<span class="c">!       pf%state%iter  = pf%state%iter + 1</span>
<span class="c">! </span>
<span class="c">! !       exit! just do predictor</span>
<span class="c">!       </span>
<span class="c">!       call start_timer(pf, TITERATION)</span>
<span class="c">!       call call_hooks(pf, -1, PF_PRE_ITERATION)</span>
<span class="c">!       </span>
<span class="c">!       if (pf%state%status /= PF_STATUS_CONVERGED) then</span>
<span class="c">!           fine_lev_p =&gt; pf%levels(pf%nlevels)</span>
<span class="c">!           call fine_lev_p%ulevel%sweeper%sweep(pf, pf%nlevels, pf%state%t0, dt, fine_lev_p%nsweeps, which)</span>
<span class="c">!        end if</span>
<span class="c">!       </span>
<span class="c">!       ! check convergence  (should always be not converged)</span>
<span class="c">!       call pf_check_convergence_oc(pf, k,  residual, converged, dir)</span>
<span class="c">!       </span>
<span class="c">!       if (pf%state%step &gt;= pf%state%nsteps) exit</span>
<span class="c">!       </span>
<span class="c">!       if (.not. converged) then</span>
<span class="c">!         !   non-blocking receive at all but the coarsest level</span>
<span class="c">!         do l = 2, pf%nlevels</span>
<span class="c">!           fine_lev_p =&gt; pf%levels(l)</span>
<span class="c">!           call pf_post(pf, fine_lev_p, fine_lev_p%index*10000+k, dir)</span>
<span class="c">!         end do</span>
<span class="c">! </span>
<span class="c">!         if (pf%state%status /= PF_STATUS_CONVERGED) then</span>
<span class="c">!           fine_lev_p =&gt; pf%levels(pf%nlevels)</span>
<span class="c">!           call pf_send(pf, fine_lev_p, fine_lev_p%index*10000+k, .false., dir)</span>
<span class="c">!           if (pf%nlevels &gt; 1) then</span>
<span class="c">!             coarse_lev_p =&gt; pf%levels(pf%nlevels-1)</span>
<span class="c">!             call restrict_time_space_fas(pf, pf%state%t0, dt, pf%nlevels, flags=which)</span>
<span class="c">!             call save(coarse_lev_p, which)</span>
<span class="c">!           end if             </span>
<span class="c">!         end if</span>
<span class="c">!         </span>
<span class="c">!         call pf_v_cycle_oc(pf, k, pf%state%t0, dt, which)</span>
<span class="c">!         call call_hooks(pf, -1, PF_POST_ITERATION)</span>
<span class="c">!         call end_timer(pf, TITERATION)</span>
<span class="c">!       end if</span>
<span class="c">!     end do  !  Niter loop</span>
<span class="c">! </span>
<span class="c">!     pf%state%iter = -1</span>
<span class="c">!     call end_timer(pf, TTOTAL)</span>
           
    <span class="n">k</span> <span class="o">=</span> <span class="mi">1</span> <span class="c">! always one block</span>
    <span class="k">do </span><span class="n">j</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">pf</span><span class="p">%</span><span class="n">niters</span>
      <span class="k">call </span><span class="n">start_timer</span><span class="p">(</span><span class="n">pf</span><span class="p">,</span> <span class="n">TITERATION</span><span class="p">)</span>
      <span class="k">call </span><span class="n">call_hooks</span><span class="p">(</span><span class="n">pf</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">PF_PRE_ITERATION</span><span class="p">)</span>

      <span class="n">pf</span><span class="p">%</span><span class="n">state</span><span class="p">%</span><span class="n">iter</span> <span class="o">=</span> <span class="n">j</span>

      <span class="c">!  Do a v_cycle</span>
<span class="c">!       call pf_v_cycle(pf, k, pf%state%t0, dt, 1 ,pf%nlevels)</span>
      <span class="k">call </span><span class="n">pf_v_cycle_oc</span><span class="p">(</span><span class="n">pf</span><span class="p">,</span> <span class="n">j</span><span class="p">,</span> <span class="n">pf</span><span class="p">%</span><span class="n">state</span><span class="p">%</span><span class="n">t0</span><span class="p">,</span> <span class="n">dt</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">pf</span><span class="p">%</span><span class="n">nlevels</span><span class="p">,</span>  <span class="n">which</span><span class="p">)</span>

      <span class="c">!  Check for convergence</span>
      <span class="k">call </span><span class="n">pf_check_convergence_oc</span><span class="p">(</span><span class="n">pf</span><span class="p">,</span> <span class="n">send_tag</span><span class="o">=</span><span class="mi">1111</span><span class="o">*</span><span class="n">k</span><span class="o">+</span><span class="n">j</span><span class="p">,</span> <span class="n">flags</span><span class="o">=</span><span class="n">dir</span><span class="p">)</span>
      <span class="k">if</span> <span class="p">(</span><span class="n">pf</span><span class="p">%</span><span class="n">save_results</span><span class="p">)</span> <span class="n">pf</span><span class="p">%</span><span class="n">results</span><span class="p">%</span><span class="n">residuals</span><span class="p">(</span><span class="n">pf</span><span class="p">%</span><span class="n">state</span><span class="p">%</span><span class="n">iter</span><span class="p">,</span> <span class="n">k</span><span class="p">,</span> <span class="n">pf</span><span class="p">%</span><span class="n">nlevels</span><span class="p">)</span> <span class="o">=</span> <span class="n">pf</span><span class="p">%</span><span class="n">levels</span><span class="p">(</span><span class="n">pf</span><span class="p">%</span><span class="n">nlevels</span><span class="p">)%</span><span class="n">residual</span>

      <span class="k">call </span><span class="n">call_hooks</span><span class="p">(</span><span class="n">pf</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">PF_POST_ITERATION</span><span class="p">)</span>
      <span class="k">call </span><span class="n">end_timer</span><span class="p">(</span><span class="n">pf</span><span class="p">,</span> <span class="n">TITERATION</span><span class="p">)</span>  
      
      <span class="c">!  If we are converged, exit block</span>
      <span class="k">if</span> <span class="p">(</span><span class="n">pf</span><span class="p">%</span><span class="n">state</span><span class="p">%</span><span class="n">status</span> <span class="o">==</span> <span class="n">PF_STATUS_CONVERGED</span><span class="p">)</span>  <span class="k">exit</span>
<span class="k">    end do</span>  <span class="c">!  Loop over the iteration in this block</span>
    <span class="k">call </span><span class="n">call_hooks</span><span class="p">(</span><span class="n">pf</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">PF_POST_CONVERGENCE</span><span class="p">)</span>
    <span class="n">pf</span><span class="p">%</span><span class="n">state</span><span class="p">%</span><span class="n">itcnt</span> <span class="o">=</span> <span class="n">pf</span><span class="p">%</span><span class="n">state</span><span class="p">%</span><span class="n">itcnt</span> <span class="o">+</span> <span class="n">pf</span><span class="p">%</span><span class="n">state</span><span class="p">%</span><span class="n">iter</span>
    <span class="k">call </span><span class="n">call_hooks</span><span class="p">(</span><span class="n">pf</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">PF_POST_STEP</span><span class="p">)</span>
    
    <span class="k">if</span> <span class="p">(</span><span class="n">pf</span><span class="p">%</span><span class="n">save_results</span><span class="p">)</span> <span class="k">call </span><span class="n">pf</span><span class="p">%</span><span class="n">results</span><span class="p">%</span><span class="n">dump</span><span class="p">(</span><span class="n">pf</span><span class="p">%</span><span class="n">results</span><span class="p">)</span>
    
    <span class="k">call </span><span class="n">end_timer</span><span class="p">(</span><span class="n">pf</span><span class="p">,</span> <span class="n">TTOTAL</span><span class="p">)</span>
  <span class="k">end subroutine </span><span class="n">pf_pfasst_block_oc</span>
</pre></div>

    </section>
    <br>
    
    
    </div>
  </div>


    <hr>    
    </div> <!-- /container -->
    <footer>
      <div class="container">
      <div class="row">
        <div class="col-xs-6 col-md-4"><p>&copy; 2019 <a rel="license" href="http://www.freebsd.org/copyright/freebsd-doc-license.html">FreeBSD Documentation License</a>
                                          </p></div>
        <div class="col-xs-6 col-md-4 col-md-push-4">
          <p class="text-right">
            Documentation generated by 
            <a href="https://github.com/cmacmackin/ford">FORD</a>
            
          </p>
        </div>
        <div class="col-xs-12 col-md-4 col-md-pull-4"><p class="text-center"> libpfasst was developed by Matthew Emmett. Michael Minion, Sebastian Goetschel, Brandon Krull, Francois Hamon</p></div>
      </div>
      <br>
      </div> <!-- /container -->    
    </footer>

    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
<!--
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
-->
    <script src="../js/bootstrap.min.js"></script>
    <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
    <script src="../js/ie10-viewport-bug-workaround.js"></script>

    <!-- MathJax JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        TeX: { extensions: ['AMSmath.js','AMSsymbols.js','noErrors.js','noUndefined.js'], equationNumbers: { autoNumber: 'AMS' } },
        jax: ['input/TeX','input/MathML','output/HTML-CSS'],
        extensions: ['tex2jax.js','mml2jax.js','MathMenu.js','MathZoom.js']
      });
    </script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    
    <script src="../tipuesearch/tipuesearch_content.js"></script>
    <script src="../tipuesearch/tipuesearch_set.js"></script>
    <script src="../tipuesearch/tipuesearch.js"></script>
    
    
  </body>
</html>